var mg = document.createElement("iframe")
mg.setAttribute("id", "mgid")
mg.setAttribute("src", 'data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sPgogIDxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xIi8+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Um9ib3RvOjMwMCIgcmVsPSJzdHlsZXNoZWV0Ij4KCTxzdHlsZT4KICAgIAlodG1sLCBib2R5IHsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMCU7Cn0KYm9keSB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIG1hcmdpbjogMDsKICBmb250LXNpemU6IDA7CiAgYmFja2dyb3VuZC1jb2xvcjogIzMwMzAzMDsKICBjb2xvcjogd2hpdGU7CiAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmOwp9Ci5ncmlkIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI0MjQyOwogIHBhZGRpbmc6IDIwcHg7CiAgYm94LXNoYWRvdzogMCA2cHggMjRweCByZ2JhKDAsMCwwLDAuMyk7CiAgYm9yZGVyLXJhZGl1czogMnB4OwogIHdpZHRoOiAzNTVweDsKICBoZWlnaHQ6IDM1NXB4OwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouZ3JpZDo6YWZ0ZXIgewogIGNvbnRlbnQ6IGF0dHIoZGF0YS1zY29yZSk7CiAgZm9udC1zaXplOiA3MnB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMTAwJTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm90dG9tOiAxMDAlOwogIGxlZnQ6IDA7Cn0KLmdyaWQgPiBzcGFuIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgcGFkZGluZzogMjBweDsKICBib3JkZXItcmFkaXVzOiAycHg7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiAyMHB4OwogIGJveC1zaGFkb3c6IDAgMC41cHggM3B4IHJnYmEoMCwwLDAsMC4zKTsKICB0cmFuc2l0aW9uOiBsZWZ0IC4ycywgdG9wIC4yczsKfQouZ3JpZCA+IHNwYW4uc3F1YXJlIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTAgMTAnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIGZpbGw9J25vbmUnIHN0cm9rZT0ncmdiYSgwLDAsMCwwLjMpJyBzdHJva2Utd2lkdGg9JzEnJTNFJTNDcGF0aCBkPSdNMSAxSDlWOUgxeicvJTNFJTNDL3N2ZyUzRSIpCn0KLmdyaWQgPiBzcGFuLmNpcmNsZSB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwIDEwJyBmaWxsPSdub25lJyBzdHJva2U9J3JnYmEoMCwwLDAsMC4zKScgc3Ryb2tlLXdpZHRoPScxJyUzRSUzQ2NpcmNsZSBjeD0nNScgY3k9JzUnIHI9JzQnLyUzRSUzQy9zdmclM0UiKQp9Ci5ncmlkID4gc3Bhbi50cmlhbmdsZSB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwIDEwJyBzdHJva2UtbGluZWpvaW49J3JvdW5kJyBmaWxsPSdub25lJyBzdHJva2U9J3JnYmEoMCwwLDAsMC4zKScgc3Ryb2tlLXdpZHRoPScxJyUzRSUzQ3BhdGggZD0nTTUgMS41TDkgOC41SDF6Jy8lM0UlM0Mvc3ZnJTNFIikKfQouZ3JpZCA+IHNwYW4ucGx1cyB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwIDEwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIGZpbGw9J25vbmUnIHN0cm9rZT0ncmdiYSgwLDAsMCwwLjMpJyBzdHJva2Utd2lkdGg9JzEnJTNFJTNDcGF0aCBkPSdNNSAxVjlNMSA1SDknLyUzRSUzQy9zdmclM0UiKQp9Ci5ncmlkID4gc3Bhbi5taW51cyB7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEwIDEwJyBzdHJva2UtbGluZWNhcD0ncm91bmQnIGZpbGw9J25vbmUnIHN0cm9rZT0ncmdiYSgwLDAsMCwwLjMpJyBzdHJva2Utd2lkdGg9JzEnJTNFJTNDcGF0aCBkPSdNMiA1SDgnLyUzRSUzQy9zdmclM0UiKQp9Ci5ncmlkID4gc3Bhbi5oZXhhZ29uIHsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMTAnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIGZpbGw9J25vbmUnIHN0cm9rZT0ncmdiYSgwLDAsMCwwLjMpJyBzdHJva2Utd2lkdGg9JzEnJTNFJTNDcGF0aCBkPSdNNCAxSDhMMTAuNiA1TDggOUg0TDEuNCA1eicvJTNFJTNDL3N2ZyUzRSIpOwogIGJhY2tncm91bmQtc2l6ZTogMjRweCAyMHB4Owp9Ci5ncmlkID4gc3Bhbi5kb3QgewogIGJhY2tncm91bmQtaW1hZ2U6IHVybCgiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMCAxMCcgZmlsbD0ncmdiYSgwLDAsMCwwLjMpJyUzRSUzQ2NpcmNsZSBjeD0nNScgY3k9JzUnIHI9JzEnLyUzRSUzQy9zdmclM0UiKTsKfQouZ3JpZCA+IHNwYW46OmFmdGVyIHsKICBjb250ZW50OiAnJzsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIGJhY2tncm91bmQtc2l6ZTogMTAwJTsKICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTAgMTAnIHN0cm9rZS1saW5lam9pbj0ncm91bmQnIHN0cm9rZS1saW5lY2FwPSdyb3VuZCcgZmlsbD0nbm9uZScgc3Ryb2tlPSd3aGl0ZScgc3Ryb2tlLXdpZHRoPScxJyUzRSUzQ3BhdGggZD0nTTEgMlYxSDJNOSA4VjlIOCBNOSAyVjFIOE0yIDlIMVY4Jy8lM0UlM0Mvc3ZnJTNFIik7CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjIpOwogIG9wYWNpdHk6IDA7CiAgdHJhbnNpdGlvbjogYWxsIC4yczsKfQouZ3JpZCA+IHNwYW4uYWN0aXZlOjphZnRlciB7CiAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICBvcGFjaXR5OiAxOwp9Ci5ncmlkID4gc3Bhbi5lbnRlcmluZyB7CiAgcGFkZGluZzogMCAyMHB4OwogIGFuaW1hdGlvbjogZW50ZXJpbmcgLjJzIC4ycyBmb3J3YXJkczsKfQpAa2V5ZnJhbWVzIGVudGVyaW5nIHsKICBmcm9tIHtwYWRkaW5nOiAwIDIwcHg7fQogIHRvIHtwYWRkaW5nOiAyMHB4O30KfQouZ3JpZCA+IHNwYW4uZXhpdGluZyB7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7CiAgYW5pbWF0aW9uOiBleGl0aW5nIC4ycyBmb3J3YXJkczsKfQpAa2V5ZnJhbWVzIGV4aXRpbmcgewogIGZyb20ge3BhZGRpbmc6IDIwcHg7IG1hcmdpbi10b3A6IDA7fQogIHRvIHtwYWRkaW5nOiAwIDIwcHg7IG1hcmdpbi10b3A6IDQwcHg7fQp9CiAgPC9zdHlsZT4KICA8L2hlYWQ+CiAgPGJvZHk+CiAgICA8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CiAgICAgIGNvbnN0IGNvbG91cnMgPSBbInJlZCIsICJvcmFuZ2UiLCAieWVsbG93IiwgImRvZGdlcmJsdWUiLCAibGltZWdyZWVuIiwgImRhcmtvcmNoaWQiLCAiaG90cGluayJdLApzaGFwZXMgPSBbIm1pbnVzIiwgImNpcmNsZSIsICJ0cmlhbmdsZSIsICJwbHVzIiwgInNxdWFyZSIsICJoZXhhZ29uIiwgImRvdCJdLApCT0FSRF9TSVpFID0gOCwKc2NvcmUgPSB7CiAgc2V0KG4pIHsKICAgIHNjb3JlLm51bWJlciA9IG47CiAgICBzcXVhcmVFbGVtLmRhdGFzZXQuc2NvcmUgPSBuOwogIH0sCiAgYWRkKG4pIHsKICAgIHRoaXMuc2V0KG4gKyB0aGlzLm51bWJlcik7CiAgfQp9OwpjbGFzcyBUaWxlIHsKICBjb25zdHJ1Y3Rvcih4LCB5LCBjb2xvdXIsIGVudGVyaW5nID0gZmFsc2UpIHsKICAgIHRoaXMuY29sb3VyID0gLTE7CgogICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpOwogICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZSA9PiB7CiAgICAgIGlmIChzZWxlY3RlZFRpbGUgPT09ICdET05UU0VMRUNUJyk7CiAgICAgIGVsc2UgaWYgKHNlbGVjdGVkVGlsZSkgewogICAgICAgIGlmIChzZWxlY3RlZFRpbGUueCA9PT0gdGhpcy54ICYmIE1hdGguYWJzKHNlbGVjdGVkVGlsZS55IC0gdGhpcy55KSA9PT0gMQogICAgICAgICAgICB8fCBzZWxlY3RlZFRpbGUueSA9PT0gdGhpcy55ICYmIE1hdGguYWJzKHNlbGVjdGVkVGlsZS54IC0gdGhpcy54KSA9PT0gMSkgewogICAgICAgICAgbGV0IGxhc3RQb3NpdGlvbnMgPSB7CiAgICAgICAgICAgIG1lOiBbdGhpcy54LCB0aGlzLnldLAogICAgICAgICAgICBzZWxlY3RlZFRpbGU6IFtzZWxlY3RlZFRpbGUueCwgc2VsZWN0ZWRUaWxlLnksIHNlbGVjdGVkVGlsZS5lbGVtXQogICAgICAgICAgfTsKICAgICAgICAgIHNlbGVjdGVkVGlsZS5tb3ZlVGlsZVRvKHRoaXMueCwgdGhpcy55KTsKICAgICAgICAgIHRoaXMubW92ZVRvKHNlbGVjdGVkVGlsZS54LCBzZWxlY3RlZFRpbGUueSk7CiAgICAgICAgICBzZWxlY3RlZFRpbGUgPSBudWxsOwoKICAgICAgICAgIGlmICghc3RhcnRNdXJkZXJTcHJlZSgyMDApKSB7CiAgICAgICAgICAgIHNlbGVjdGVkVGlsZSA9ICdET05UU0VMRUNUJzsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgbGFzdFBvc2l0aW9ucy5zZWxlY3RlZFRpbGVbMl0ubW92ZVRvKGxhc3RQb3NpdGlvbnMuc2VsZWN0ZWRUaWxlWzBdLCBsYXN0UG9zaXRpb25zLnNlbGVjdGVkVGlsZVsxXSk7CiAgICAgICAgICAgICAgdGhpcy5tb3ZlVG8obGFzdFBvc2l0aW9ucy5tZVswXSwgbGFzdFBvc2l0aW9ucy5tZVsxXSk7CiAgICAgICAgICAgICAgc2VsZWN0ZWRUaWxlID0gbnVsbDsKICAgICAgICAgICAgfSwgMjAwKTsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHNlbGVjdGVkVGlsZS5jYW5jZWwoKSA9PT0gdGhpcykgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNlbGVjdGVkVGlsZSkgewogICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKTsKICAgICAgICBzZWxlY3RlZFRpbGUgPSB7CiAgICAgICAgICB4OiB0aGlzLngsCiAgICAgICAgICB5OiB0aGlzLnksCiAgICAgICAgICBtb3ZlVGlsZVRvOiAoeCwgeSkgPT4gewogICAgICAgICAgICB0aGlzLm1vdmVUbyh4LCB5KTsKICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpOwogICAgICAgICAgfSwKICAgICAgICAgIGNhbmNlbDogKCkgPT4gewogICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIik7CiAgICAgICAgICAgIHNlbGVjdGVkVGlsZSA9IG51bGw7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgICAgfSwKICAgICAgICAgIGVsZW06IHRoaXMKICAgICAgICB9OwogICAgICB9CiAgICB9LCBmYWxzZSk7CgogICAgc3dpdGNoIChjb2xvdXIpIHsKICAgICAgY2FzZSAiYm9tYiI6CiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImJvbWIiKTsKICAgICAgZGVmYXVsdDoKICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChzaGFwZXNbY29sb3VyXSk7CiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG91cnNbY29sb3VyXTsKICAgICAgICB0aGlzLmNvbG91ciA9IGNvbG91cjsKICAgIH0KCiAgICBpZiAoZW50ZXJpbmcpIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJlbnRlcmluZyIpOwogICAgc3F1YXJlRWxlbS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpOwoKICAgIHRoaXMueCA9IHg7CiAgICB0aGlzLnkgPSB5OwogICAgdGhpcy5tb3ZlVG8oeCwgeSk7CiAgfQogIHJlbW92ZShhbmltYXRlID0gdHJ1ZSwgYWRkTmV3SXRlbSA9IHRydWUpIHsKICAgIGlmIChhbmltYXRlKSB7CiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJleGl0aW5nIik7CiAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJhbmltYXRpb25lbmQiLCBlID0+IHsKICAgICAgICBzcXVhcmVFbGVtLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCk7CiAgICAgIH0sIGZhbHNlKTsKICAgIH0KICAgIGVsc2Ugc3F1YXJlRWxlbS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpOwogICAgdGlsZUVsZW1zW3RoaXMueV1bdGhpcy54XSA9IG51bGwsIHRpbGVzW3RoaXMueV1bdGhpcy54XSA9IG51bGw7CiAgICBmb3IgKGxldCB0ZW1wWSA9IHRoaXMueTsgdGVtcFktLTspIHRpbGVFbGVtc1t0ZW1wWV1bdGhpcy54XS5tb3ZlVG8odGhpcy54LCB0ZW1wWSArIDEpOwogICAgaWYgKGFkZE5ld0l0ZW0pIHsKICAgICAgbmV3IFRpbGUodGhpcy54LCAwLCBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjb2xvdXJzLmxlbmd0aCksIHRydWUpOwogICAgfQogICAgaWYgKHNlbGVjdGVkVGlsZSAmJiBzZWxlY3RlZFRpbGUuZWxlbSA9PT0gdGhpcykgc2VsZWN0ZWRUaWxlID0gbnVsbDsKICB9CiAgbW92ZVRvKHgsIHkpIHsKICAgIGlmICh0aWxlRWxlbXNbdGhpcy55XVt0aGlzLnhdID09PSB0aGlzKSB0aWxlRWxlbXNbdGhpcy55XVt0aGlzLnhdID0gbnVsbCwgdGlsZXNbdGhpcy55XVt0aGlzLnhdID0gbnVsbDsKICAgIHRoaXMuZWxlbWVudC5zdHlsZS5sZWZ0ID0gKCh0aGlzLnggPSB4KSAqIDQ1ICsgMjApICsgInB4IjsKICAgIHRoaXMuZWxlbWVudC5zdHlsZS50b3AgPSAoKHRoaXMueSA9IHkpICogNDUgKyAyMCkgKyAicHgiOwogICAgdGlsZUVsZW1zW3ldW3hdID0gdGhpcywgdGlsZXNbeV1beF0gPSB0aGlzLmNvbG91cjsKICB9Cn0KZnVuY3Rpb24gc3RhcnRNdXJkZXJTcHJlZSh3YXNSaWdodEFmdGVyVHJhbnNpdGlvbiA9IGZhbHNlKSB7CiAgbGV0IGZvdW5kTWF0Y2hlcywKICBjb21ibyA9IDAsCiAgdG9SZW1vdmUgPSBbXTsKICB3aGlsZSAoKGZvdW5kTWF0Y2hlcyA9IGNoZWNrRm9yTWF0Y2hlcyh0aWxlcykpLmxlbmd0aCkgewogICAgZm9yIChsZXQgaSA9IGZvdW5kTWF0Y2hlcy5sZW5ndGg7IGktLTspIGZvciAobGV0IGogPSBmb3VuZE1hdGNoZXNbaV0ubGVuZ3RoOyBqLS07KSB7CiAgICAgIGxldCB0aWxlID0gdGlsZUVsZW1zW2ZvdW5kTWF0Y2hlc1tpXVtqXVsxXV1bZm91bmRNYXRjaGVzW2ldW2pdWzBdXTsKICAgICAgaWYgKCF0b1JlbW92ZS5pbmNsdWRlcyh0aWxlKSkgewogICAgICAgIHRvUmVtb3ZlLnB1c2godGlsZSk7CiAgICAgICAgdGlsZXNbZm91bmRNYXRjaGVzW2ldW2pdWzFdXVtmb3VuZE1hdGNoZXNbaV1bal1bMF1dID0gTmFOOwogICAgICB9CiAgICB9CiAgICBjb21ibysrOwogIH0KICBsZXQga2lsbGluZyA9ICgpID0+IHsKICAgIGZvciAobGV0IGkgPSB0b1JlbW92ZS5sZW5ndGg7IGktLTspIHRvUmVtb3ZlW2ldLnJlbW92ZSgpOwogICAgc2NvcmUuYWRkKHRvUmVtb3ZlLmxlbmd0aCAqIDEwMCk7CiAgICBzdGFydE11cmRlclNwcmVlKDQwMCk7CiAgfTsKICBpZiAoY29tYm8gIT09IDApIHsKICAgIGlmICh3YXNSaWdodEFmdGVyVHJhbnNpdGlvbikgc2V0VGltZW91dChraWxsaW5nLCB3YXNSaWdodEFmdGVyVHJhbnNpdGlvbik7CiAgICBlbHNlIGtpbGxpbmcoKTsKICB9CiAgcmV0dXJuIGNvbWJvICE9PSAwOwp9CmZ1bmN0aW9uIGNoZWNrRm9yTWF0Y2hlcyh0aWxlcykgewogIGZ1bmN0aW9uIGdldENvb3Jkcyh4LCB5LCB5d2lzZSA9IHRydWUsIGZyb250T2Zmc2V0ID0gMCwgc2lkZU9mZnNldCA9IDApIHsKICAgIHJldHVybiBbeCArICh5d2lzZSA/IHNpZGVPZmZzZXQgOiBmcm9udE9mZnNldCksIHkgKyAoeXdpc2UgPyBmcm9udE9mZnNldCA6IHNpZGVPZmZzZXQpXTsKICB9CiAgZnVuY3Rpb24gZ2V0VGlsZShjb29yZHMpIHsKICAgIHJldHVybiB0aWxlc1tjb29yZHNbMV1dW2Nvb3Jkc1swXV07CiAgfQogIGZ1bmN0aW9uIGFyZVNhbWVDb2xvdXIodGlsZTEsIHRpbGUyKSB7CiAgICByZXR1cm4gdGlsZTEgPT09IC0xIHx8IHRpbGUyID09PSAtMSB8fCB0aWxlMSA9PT0gdGlsZTI7CiAgfQogIGZ1bmN0aW9uIGFjdHVhbGx5Q2hlY2tGb3JNYXRjaGVzKHgsIHksIHl3aXNlKSB7CiAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzKHgsIHkpLAogICAgY29sb3VyID0gZ2V0VGlsZShjb29yZHMpLAogICAgbWF0Y2hlcyA9IFtjb29yZHNdLAogICAgZnJvbnRDb29yZCA9IHl3aXNlID8geSA6IHgsCiAgICBzaWRlQ29vcmQgPSB5d2lzZSA/IHggOiB5OwogICAgZm9yIChsZXQgaSA9IDE7IGkgPCA2ICYmIGZyb250Q29vcmQgLSBpID49IDA7IGkrKykgewogICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzKHgsIHksIHl3aXNlLCAtaSk7CiAgICAgIGlmIChhcmVTYW1lQ29sb3VyKGNvbG91ciwgZ2V0VGlsZShjb29yZHMpKSkgbWF0Y2hlcy5wdXNoKGNvb3Jkcyk7CiAgICAgIGVsc2UgYnJlYWs7CiAgICB9CiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPj0gMykgewogICAgICBsZXQgYWN0dWFsTWF0Y2hlcyA9IFttYXRjaGVzXTsKICAgICAgZm9yIChsZXQgaSA9IG1hdGNoZXMubGVuZ3RoOyBpLS07KSB7CiAgICAgICAgbGV0IHNpZGVNYXRjaGVzID0gW2dldENvb3Jkcyh4LCB5LCB5d2lzZSwgLWkpXSwKICAgICAgICBsZWZ0SXNEb25lID0gZmFsc2UsCiAgICAgICAgcmlnaHRJc0RvbmUgPSBmYWxzZTsKICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IDY7IGorKykgewogICAgICAgICAgbGV0IGxlZnRDb29yZHMgPSBnZXRDb29yZHMoeCwgeSwgeXdpc2UsIC1pLCAtaiksCiAgICAgICAgICByaWdodENvb3JkcyA9IGdldENvb3Jkcyh4LCB5LCB5d2lzZSwgLWksIGopOwogICAgICAgICAgaWYgKCFsZWZ0SXNEb25lICYmIHNpZGVDb29yZCAtIGogPj0gMCAmJiBhcmVTYW1lQ29sb3VyKGNvbG91ciwgZ2V0VGlsZShsZWZ0Q29vcmRzKSkpIHNpZGVNYXRjaGVzLnB1c2gobGVmdENvb3Jkcyk7CiAgICAgICAgICBlbHNlIGxlZnRJc0RvbmUgPSB0cnVlOwogICAgICAgICAgaWYgKCFyaWdodElzRG9uZSAmJiBzaWRlQ29vcmQgKyBqIDwgOCAmJiBhcmVTYW1lQ29sb3VyKGNvbG91ciwgZ2V0VGlsZShyaWdodENvb3JkcykpKSBzaWRlTWF0Y2hlcy5wdXNoKHJpZ2h0Q29vcmRzKTsKICAgICAgICAgIGVsc2UgcmlnaHRJc0RvbmUgPSB0cnVlOwogICAgICAgICAgaWYgKGxlZnRJc0RvbmUgJiYgcmlnaHRJc0RvbmUpIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZiAoc2lkZU1hdGNoZXMubGVuZ3RoID49IDMpIGFjdHVhbE1hdGNoZXMucHVzaChzaWRlTWF0Y2hlcyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGFjdHVhbE1hdGNoZXM7CiAgICB9CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIGZvciAobGV0IHkgPSBCT0FSRF9TSVpFOyB5LS07KSBmb3IgKGxldCB4ID0gQk9BUkRfU0laRTsgeC0tOykgewogICAgaWYgKHkgPiAxKSB7CiAgICAgIGxldCBtYXRjaGVzID0gYWN0dWFsbHlDaGVja0Zvck1hdGNoZXMoeCwgeSwgdHJ1ZSk7CiAgICAgIGlmIChtYXRjaGVzKSByZXR1cm4gbWF0Y2hlczsKICAgIH0KICAgIGlmICh4ID4gMSkgewogICAgICBsZXQgbWF0Y2hlcyA9IGFjdHVhbGx5Q2hlY2tGb3JNYXRjaGVzKHgsIHksIGZhbHNlKTsKICAgICAgaWYgKG1hdGNoZXMpIHJldHVybiBtYXRjaGVzOwogICAgfQogIH0KICByZXR1cm4gW107Cn0KbGV0IHNxdWFyZUVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSwKdGlsZXMgPSBbXSwKdGlsZUVsZW1zID0gW107CnNxdWFyZUVsZW0uY2xhc3NMaXN0LmFkZCgiZ3JpZCIpOwpmb3IgKGxldCB5ID0gODsgeS0tOykgewogIGxldCByb3cgPSBbXTsKICBmb3IgKGxldCB4ID0gODsgeC0tOykgcm93LnB1c2goTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29sb3Vycy5sZW5ndGgpKTsKICB0aWxlcy5wdXNoKHJvdyk7Cn0KbGV0IGZvdW5kTWF0Y2hlczsKd2hpbGUgKChmb3VuZE1hdGNoZXMgPSBjaGVja0Zvck1hdGNoZXModGlsZXMpKS5sZW5ndGgpIHsKICBmb3IgKGxldCBpID0gMzsgaS0tOykgdGlsZXNbZm91bmRNYXRjaGVzWzBdW2ldWzFdXVtmb3VuZE1hdGNoZXNbMF1baV1bMF1dID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY29sb3Vycy5sZW5ndGgpOwp9CmxldCBzZWxlY3RlZFRpbGUgPSBudWxsOwpmb3IgKGxldCB5ID0gODsgeS0tOykgewogIGxldCBlbGVtUm93ID0gW107CiAgdGlsZUVsZW1zW3ldID0gZWxlbVJvdzsKICBmb3IgKGxldCB4ID0gODsgeC0tOykgbmV3IFRpbGUoeCwgeSwgdGlsZXNbeV1beF0pOwp9CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3F1YXJlRWxlbSk7CnNjb3JlLnNldCgwKTsKICAgIDwvc2NyaXB0PgogIDwvYm9keT4KPC9odG1sPg==')
document.getElementsByTagName("body")[0].appendChild(mg).focus()
var thestyle = document.createElement("style")
thestyle.innerText += "#mgid {position: fixed; left: 0px; top: 0px; width: 100%; height:100%; background: black; z-index: 9999999999; border: none;}"
thestyle.innerText += "body {overflow: hidden;}"
document.getElementsByTagName("body")[0].appendChild(thestyle)
